<!DOCTYPE html>
<html>

<head>
    <title>MYANMAR LINK</title>
    <link rel="stylesheet" href="Style/mdb.min.css" />
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
    <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
</head>

<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <!-- Container wrapper -->
        <div class="container-fluid">
            <!-- Toggle button -->
            <button class="navbar-toggler" type="button" data-mdb-toggle="collapse"
                data-mdb-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <i class="fas fa-bars"></i>
            </button>

            <!-- Collapsible wrapper -->
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <!-- Navbar brand -->
                <a class="navbar-brand mt-2 mt-lg-0" href="#">
                    MYANMAR LINK
                </a>
            </div>
            <!-- Collapsible wrapper -->

        </div>
        <!-- Container wrapper -->
    </nav>
    <!-- Navbar -->
    <main id="main">
        <div id="map" style="height:80vh;"></div>
    </main>
    <!-- Footer -->
    <footer class="text-center text-lg-start bg-light text-muted">
        <!-- Section: Social media -->
        <section class="d-flex justify-content-center justify-content-lg-between p-4 border-top border-bottom">
            <div class="container text-center text-md-start mt-5">
            </div>
        </section>
        <!-- Section: Links  -->

        <!-- Copyright -->
        <!-- <div class="text-center p-4" style="background-color: rgba(0, 0, 0, 0.05);">
            Â© 2021 Copyright:
            <a class="text-reset fw-bold" href="https://mdbootstrap.com/">MDBootstrap.com</a>
        </div> -->
        <!-- Copyright -->
    </footer>
    <!-- Footer -->
    <!-- <script type="text/javascript" src="Script/mdb.min.js"></script>
    <script type="text/javascript" src="Script/jquery-3.3.1.min.js"></script> -->
    <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-analytics.js"></script>
    <script>


           const firebaseConfig = {
            apiKey: "AIzaSyBFuQI4JTm04WVUPeJzIqm1eCIQzc3kF04",
            authDomain: "my-place-1a38a.firebaseapp.com",
            databaseURL: "https://my-place-1a38a-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "my-place-1a38a",
            storageBucket: "my-place-1a38a.appspot.com",
            messagingSenderId: "634843586019",
            appId: "1:634843586019:web:a048f635da31894ae054d6",
            measurementId: "G-F95ZSSL42T"
        };
        firebase.initializeApp(firebaseConfig);
        // let obj={
        //         "name" : "aung aung",
        //         "phone" : "09425675433",
        //         "lat" : 16.7745,
        //         "lng" : 96.1588,
        //         "updatedate" : "2023-06-29 08:55:12"
        //         }
        // firebase.database().ref('users/user3').set(obj);
        // firebase.analytics();
        // Creating map options
        var mapOptions = {
            center: [16.810539, 96.176570],
            zoom: 13
        }

        // Creating a map object
        var map = new L.map('map', mapOptions);

        // Creating a Layer object 
        var layer = new L.TileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png');
        /*
        var layer = L.tileLayer('http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}',{
            maxZoom: 20,
            subdomains:['mt0','mt1','mt2','mt3']
        });
        */
       /*
        var layer = L.tileLayer('http://{s}.google.com/vt/lyrs=p&x={x}&y={y}&z={z}',{
            maxZoom: 20,
            subdomains:['mt0','mt1','mt2','mt3']
        });

        var layer = L.tileLayer('http://{s}.google.com/vt/lyrs=s,h&x={x}&y={y}&z={z}',{
            maxZoom: 20,
            subdomains:['mt0','mt1','mt2','mt3']
        });
        */

        // marker array
        var marker_list = [];

        // Adding layer to the map
        map.addLayer(layer);

        firebase.database().ref('users').on('value', function (snapshot) { 
            for(let i=0; i < marker_list.length; i++){
                //marker_list[i].remove();
                map.removeLayer(marker_list[i]);
            }
          snapshot.forEach(
           function(ChildSnapshot){
            let marker= L.marker([parseFloat(ChildSnapshot.val().lat),parseFloat(ChildSnapshot.val().lng)]).addTo(map).bindPopup(ChildSnapshot.val().name +'<br/>'+ChildSnapshot.val().phone+'<br/>'+ChildSnapshot.val().updatedate);
            marker_list.push(marker);
        }
          )
        })

    </script>
</body>

</html>